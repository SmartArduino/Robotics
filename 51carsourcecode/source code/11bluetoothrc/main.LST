C51 COMPILER V9.01   MAIN                                                                  01/02/2014 16:43:24 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*****************HL-1»Û¾»À¶ÑÀÖÇÄÜĞ¡³µÀı³Ì*****************
   2          *  Æ½Ì¨£ºHJ-4WD/HJ-E/HL-1ÖÇÄÜĞ¡³µ + Keil U4 + STC89C52
   3          *  Ãû³Æ£º
   4          *  ¹«Ë¾£º»Û¾»µç×Ó¿Æ¼¼ÓĞÏŞ¹«Ë¾
   5          *  ÌÔ±¦£ºhttp://shop37031453.taobao.com       
   6          *  ÍøÕ¾£ºwww.hjmcu.com  ÖÇÄÜĞ¡³µ×¨ÓÃÍøÕ¾£ºWWW.HLMCU.COM
   7          *  ±àĞ´£º
   8          *  ÈÕÆÚ£º2008-8-08
   9          *  ½»Á÷:ÖÇÄÜ³µQQ:1526248688  ¿ª·¢°åQQ:398115088
  10          *  ¾§Õñ:11.0592MHZ
  11          *  ËµÃ÷£ºÃâ·Ñ¿ªÔ´£¬²»Ìá¹©Ô´´úÂë·ÖÎö£¬ÓĞÎÊÌâÖ±½Óµ½»Û¾»ÂÛÌ³½»Á÷
  12          *  ÂÛÌ³£ºhttp://hjdz.haotui.com 
  13          *  Ãâ·Ñ½áÔµ£º5ĞÇºÃÆÀÔùËÍ18¸ö×ÊÁÏ°ü£¬×·¼ÓÆÀ¼ÛºóÔÙ¼ÓËÍ20G×ÊÁÏ£¬ÍøÉÏÍøÅÌÏÂÔØ
  14          *  ÊÓÆµ½Ì³Ì£º±¾Ğ¡³µÅäÌ×ÏêÏ¸ÊÓÆµ½Ì³Ì£¬ÓĞĞèÒªÇëµ½»Û¾»ÍøÕ¾Ãâ·ÑÏÂÔØ
  15          ******************************************************************/
  16              
  17                  //×¢Òâ³ÌĞòÖ»×ö²Î¿¼Ö®ÓÃ£¬Òª´ïµ½×îÀíÏëµÄĞ§¹û£¬»¹ĞèÒªÍ¬Ñ§ÃÇÏ¸ĞÄµ÷ÊÔ¡£      
  18                  //×¢ÒâÀ¶ÑÀÄ£¿é½ÓÏß£¬¼±ĞÔÖ®ÈË¾­³£½Ó´íÏß£¬ÉÕ»µÄ£¿é£¬ÇëÒ»¶¨ÒªºË¶ÔºÃÔÙÍ¨µçÊÔÑé£¬Ä£¿é½Ó´íÏßÉÕ»µ²»±£ĞŞ£¬²»»»»õµ
             -Ä¡£
  19                  /****************************************************************************
  20                   Ó²¼şÁ¬½Ó
  21                   À¶ÑÀÓĞ4ÌõÏß¶¨Òå£º
  22                    VCC
  23                GND
  24                    TDX
  25                    RXD
  26                   °ÑÀ¶ÑÀ²åÈëµ¥Æ¬»úJ7½Ó¿ÚÖĞ        --×¢Òâ²»Òª½Ó´íÏß£¬·ñÔòÉÕ»µÀ¶ÑÀÄ£¿é£¬²»±£ĞŞ£¬²»»»»õ¡£
  27                  ****************************************************************************/
  28          
  29          #include<AT89x51.H>
  30          
  31                  //HL-1Ğ¡³µÇı¶¯½ÓÏß¶¨Òå
  32              #define Left_moto_go      {P1_2=0,P1_3=1;}    //×ó±ßµç»úÏòÇ°×ß
  33                  #define Left_moto_back    {P1_2=1,P1_3=0;}    //×ó±ßµç»úÏòºó×ª
  34                  #define Left_moto_Stop    {P1_2=0,P1_3=0;}    //×ó±ßµç»úÍ£×ª                     
  35                  #define Right_moto_go     {P1_6=1,P1_7=0;}      //ÓÒ±ßµç»úÏòÇ°×ß
  36                  #define Right_moto_back   {P1_6=0,P1_7=1;}      //ÓÒ±ßµç»úÏòºó×ß
  37                  #define Right_moto_Stop   {P1_6=0,P1_7=0;}      //ÓÒ±ßµç»úÍ£×ª   
  38          
  39                  #define left     'C'
  40              #define right    'D'
  41                  #define up       'A'
  42              #define down     'B'
  43                  #define stop     'F'
  44          
  45                  char code str[] =  "ÊÕµ½Ö¸Áî£¬ÏòÇ°!\n";
  46                  char code str1[] = "ÊÕµ½Ö¸Áî£¬Ïòºó!\n";
  47                  char code str2[] = "ÊÕµ½Ö¸Áî£¬Ïò×ó!\n";
  48                  char code str3[] = "ÊÕµ½Ö¸Áî£¬ÏòÓÒ!\n";
  49                  char code str4[] = "ÊÕµ½Ö¸Áî£¬Í£Ö¹!\n";
  50          
  51                  bit  flag_REC=0; 
  52                  bit  flag    =0;  
  53                  
  54          
C51 COMPILER V9.01   MAIN                                                                  01/02/2014 16:43:24 PAGE 2   

  55                  unsigned char  i=0;
  56                  unsigned char  dat=0;
  57              unsigned char  buff[5]=0; //½ÓÊÕ»º³å×Ö½Ú
  58          
  59          
  60             
  61          /************************************************************************/      
  62          //ÑÓÊ±º¯Êı      
  63             void delay(unsigned int k)
  64          {    
  65   1           unsigned int x,y;
  66   1               for(x=0;x<k;x++) 
  67   1                 for(y=0;y<2000;y++);
  68   1      }
  69          
  70          /************************************************************************/
  71          //×Ö·û´®·¢ËÍº¯Êı
  72                    void send_str( )
  73                             // ´«ËÍ×Ö´®
  74              {
  75   1                  unsigned char i = 0;
  76   1                  while(str[i] != '\0')
  77   1                 {
  78   2                      SBUF = str[i];
  79   2                      while(!TI);                             // µÈÌØÊı¾İ´«ËÍ
  80   2                      TI = 0;                                 // Çå³ıÊı¾İ´«ËÍ±êÖ¾
  81   2                      i++;                                    // ÏÂÒ»¸ö×Ö·û
  82   2                 }    
  83   1          }
  84                  
  85                            void send_str1( )
  86                             // ´«ËÍ×Ö´®
  87              {
  88   1                  unsigned char i = 0;
  89   1                  while(str1[i] != '\0')
  90   1                 {
  91   2                      SBUF = str1[i];
  92   2                      while(!TI);                             // µÈÌØÊı¾İ´«ËÍ
  93   2                      TI = 0;                                 // Çå³ıÊı¾İ´«ËÍ±êÖ¾
  94   2                      i++;                                    // ÏÂÒ»¸ö×Ö·û
  95   2                 }    
  96   1          }   
  97          
  98                                    void send_str2( )
  99                             // ´«ËÍ×Ö´®
 100              {
 101   1                  unsigned char i = 0;
 102   1                  while(str2[i] != '\0')
 103   1                 {
 104   2                      SBUF = str2[i];
 105   2                      while(!TI);                             // µÈÌØÊı¾İ´«ËÍ
 106   2                      TI = 0;                                 // Çå³ıÊı¾İ´«ËÍ±êÖ¾
 107   2                      i++;                                    // ÏÂÒ»¸ö×Ö·û
 108   2                 }    
 109   1          }   
 110                          
 111                                    void send_str3()
 112                             // ´«ËÍ×Ö´®
 113              {
 114   1                  unsigned char i = 0;
 115   1                  while(str3[i] != '\0')
 116   1                 {
C51 COMPILER V9.01   MAIN                                                                  01/02/2014 16:43:24 PAGE 3   

 117   2                      SBUF = str3[i];
 118   2                      while(!TI);                             // µÈÌØÊı¾İ´«ËÍ
 119   2                      TI = 0;                                 // Çå³ıÊı¾İ´«ËÍ±êÖ¾
 120   2                      i++;                                    // ÏÂÒ»¸ö×Ö·û
 121   2                 }    
 122   1          }   
 123          
 124                        void send_str4()
 125                             // ´«ËÍ×Ö´®
 126              {
 127   1                  unsigned char i = 0;
 128   1                  while(str4[i] != '\0')
 129   1                 {
 130   2                      SBUF = str4[i];
 131   2                      while(!TI);                             // µÈÌØÊı¾İ´«ËÍ
 132   2                      TI = 0;                                 // Çå³ıÊı¾İ´«ËÍ±êÖ¾
 133   2                      i++;                                    // ÏÂÒ»¸ö×Ö·û
 134   2                 }    
 135   1          }   
 136                          
 137                          
 138          /************************************************************************/
 139          //Ç°ËÙÇ°½ø
 140               void  run(void)
 141          {
 142   1          
 143   1               Left_moto_go ;   //×óµç»úÍùÇ°×ß
 144   1               Right_moto_go ;  //ÓÒµç»úÍùÇ°×ß
 145   1      }
 146          
 147          //Ç°ËÙºóÍË
 148               void  backrun(void)
 149          {
 150   1          
 151   1               Left_moto_back ;   //×óµç»úÍùÇ°×ß
 152   1               Right_moto_back ;  //ÓÒµç»úÍùÇ°×ß
 153   1      }
 154          
 155          //×ó×ª
 156               void  leftrun(void)
 157          {
 158   1          
 159   1               Left_moto_back ;   //×óµç»úÍùÇ°×ß
 160   1               Right_moto_go ;  //ÓÒµç»úÍùÇ°×ß
 161   1      }
 162          
 163          //ÓÒ×ª
 164               void  rightrun(void)
 165          {
 166   1          
 167   1               Left_moto_go ;   //×óµç»úÍùÇ°×ß
 168   1               Right_moto_back ;  //ÓÒµç»úÍùÇ°×ß
 169   1      }
 170          //STOP
 171               void  stoprun(void)
 172          {
 173   1          
 174   1               Left_moto_Stop ;   //×óµç»úÍùÇ°×ß
 175   1               Right_moto_Stop ;  //ÓÒµç»úÍùÇ°×ß
 176   1      }
 177          /************************************************************************/
 178          void sint() interrupt 4   //ÖĞ¶Ï½ÓÊÕ3¸ö×Ö½Ú
C51 COMPILER V9.01   MAIN                                                                  01/02/2014 16:43:24 PAGE 4   

 179          { 
 180   1       
 181   1          if(RI)                       //ÊÇ·ñ½ÓÊÕÖĞ¶Ï
 182   1          {
 183   2             RI=0;
 184   2             dat=SBUF;
 185   2             if(dat=='O'&&(i==0)) //½ÓÊÕÊı¾İµÚÒ»Ö¡
 186   2               {
 187   3                  buff[i]=dat;
 188   3                  flag=1;        //¿ªÊ¼½ÓÊÕÊı¾İ
 189   3               }
 190   2             else
 191   2            if(flag==1)
 192   2           {
 193   3            i++;
 194   3            buff[i]=dat;
 195   3            if(i>=2)
 196   3            {i=0;flag=0;flag_REC=1 ;}  // Í£Ö¹½ÓÊÕ
 197   3           }
 198   2               }
 199   1      }
 200          /*********************************************************************/          
 201          /*--Ö÷º¯Êı--*/
 202                  void main(void)
 203          {
 204   1              TMOD=0x20;  
 205   1          TH1=0xFd;              //11.0592M¾§Õñ£¬9600²¨ÌØÂÊ
 206   1          TL1=0xFd;
 207   1          SCON=0x50;  
 208   1          PCON=0x00; 
 209   1          TR1=1;
 210   1              ES=1;   
 211   1          EA=1;   
 212   1              
 213   1              while(1)                                                        /*ÎŞÏŞÑ­»·*/
 214   1              { 
 215   2                if(flag_REC==1)                                   //
 216   2                 {
 217   3                      flag_REC=0;
 218   3                      if(buff[0]=='O'&&buff[1]=='N')  //µÚÒ»¸ö×Ö½ÚÎªO£¬µÚ¶ş¸ö×Ö½ÚÎªN£¬µÚÈı¸ö×Ö½ÚÎª¿ØÖÆÂë
 219   3                      switch(buff[2])
 220   3                   {
 221   4                            case up :                                             // Ç°½ø
 222   4                                send_str( );
 223   4                                run();
 224   4                                break;
 225   4                            case down:                                                // ºóÍË
 226   4                                 send_str1( );
 227   4                                backrun();
 228   4                                break;
 229   4                            case left:                                                // ×ó×ª
 230   4                                 send_str3( );
 231   4                                leftrun();
 232   4                                break;
 233   4                            case right:                                               // ÓÒ×ª
 234   4                                send_str2( );
 235   4                                rightrun();
 236   4                                break;
 237   4                            case stop:                                                // Í£Ö¹
 238   4                                 send_str4( );
 239   4                                stoprun();
 240   4                                break;
C51 COMPILER V9.01   MAIN                                                                  01/02/2014 16:43:24 PAGE 5   

 241   4      
 242   4                   }
 243   3            
 244   3                                               
 245   3               }
 246   2              }
 247   1      }       


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    343    ----
   CONSTANT SIZE    =     85    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
